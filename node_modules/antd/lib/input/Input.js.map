{"version":3,"sources":["input/Input.jsx"],"names":["InputSizes","fixControlledValue","value","resolveOnChange","target","e","onChange","event","type","Object","create","currentTarget","originalInputValue","getInputClassName","prefixCls","size","disabled","Input","props","saveClearableInput","input","clearableInput","saveInput","handleReset","setValue","focus","renderInput","className","addonBefore","addonAfter","otherProps","handleChange","handleKeyDown","clearPasswordValueAttribute","removePasswordTimeout","setTimeout","getAttribute","hasAttribute","removeAttribute","onPressEnter","onKeyDown","keyCode","renderComponent","getPrefixCls","state","customizePrefixCls","defaultValue","prevProps","document","activeElement","clearTimeout","blur","select","callback","setState","nextProps","React","Component","defaultProps","propTypes","PropTypes","string","id","oneOf","maxLength","number","bool","any","node","func","onKeyUp","onFocus","onBlur","prefix","suffix","allowClear"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { polyfill } from 'react-lifecycles-compat';\nimport classNames from 'classnames';\nimport omit from 'omit.js';\nimport { tuple } from '../_util/type';\nimport ClearableLabeledInput, { hasPrefixSuffix } from './ClearableLabeledInput';\nimport { ConfigConsumer } from '../config-provider';\nimport warning from '../_util/warning';\nexport const InputSizes = tuple('small', 'default', 'large');\nexport function fixControlledValue(value) {\n    if (typeof value === 'undefined' || value === null) {\n        return '';\n    }\n    return value;\n}\nexport function resolveOnChange(target, e, onChange) {\n    if (onChange) {\n        let event = e;\n        if (e.type === 'click') {\n            // click clear icon\n            event = Object.create(e);\n            event.target = target;\n            event.currentTarget = target;\n            const originalInputValue = target.value;\n            // change target ref value cause e.target.value should be '' when clear input\n            target.value = '';\n            onChange(event);\n            // reset target ref value\n            target.value = originalInputValue;\n            return;\n        }\n        onChange(event);\n    }\n}\nexport function getInputClassName(prefixCls, size, disabled) {\n    return classNames(prefixCls, {\n        [`${prefixCls}-sm`]: size === 'small',\n        [`${prefixCls}-lg`]: size === 'large',\n        [`${prefixCls}-disabled`]: disabled,\n    });\n}\nclass Input extends React.Component {\n    constructor(props) {\n        super(props);\n        this.saveClearableInput = (input) => {\n            this.clearableInput = input;\n        };\n        this.saveInput = (input) => {\n            this.input = input;\n        };\n        this.handleReset = (e) => {\n            this.setValue('', () => {\n                this.focus();\n            });\n            resolveOnChange(this.input, e, this.props.onChange);\n        };\n        this.renderInput = (prefixCls) => {\n            const { className, addonBefore, addonAfter, size, disabled } = this.props;\n            // Fix https://fb.me/react-unknown-prop\n            const otherProps = omit(this.props, [\n                'prefixCls',\n                'onPressEnter',\n                'addonBefore',\n                'addonAfter',\n                'prefix',\n                'suffix',\n                'allowClear',\n                // Input elements must be either controlled or uncontrolled,\n                // specify either the value prop, or the defaultValue prop, but not both.\n                'defaultValue',\n                'size',\n                'inputType',\n            ]);\n            return (<input {...otherProps} onChange={this.handleChange} onKeyDown={this.handleKeyDown} className={classNames(getInputClassName(prefixCls, size, disabled), {\n                [className]: className && !addonBefore && !addonAfter,\n            })} ref={this.saveInput}/>);\n        };\n        this.clearPasswordValueAttribute = () => {\n            // https://github.com/ant-design/ant-design/issues/20541\n            this.removePasswordTimeout = setTimeout(() => {\n                if (this.input &&\n                    this.input.getAttribute('type') === 'password' &&\n                    this.input.hasAttribute('value')) {\n                    this.input.removeAttribute('value');\n                }\n            });\n        };\n        this.handleChange = (e) => {\n            this.setValue(e.target.value, this.clearPasswordValueAttribute);\n            resolveOnChange(this.input, e, this.props.onChange);\n        };\n        this.handleKeyDown = (e) => {\n            const { onPressEnter, onKeyDown } = this.props;\n            if (e.keyCode === 13 && onPressEnter) {\n                onPressEnter(e);\n            }\n            if (onKeyDown) {\n                onKeyDown(e);\n            }\n        };\n        this.renderComponent = ({ getPrefixCls }) => {\n            const { value } = this.state;\n            const { prefixCls: customizePrefixCls } = this.props;\n            const prefixCls = getPrefixCls('input', customizePrefixCls);\n            return (<ClearableLabeledInput {...this.props} prefixCls={prefixCls} inputType=\"input\" value={fixControlledValue(value)} element={this.renderInput(prefixCls)} handleReset={this.handleReset} ref={this.saveClearableInput}/>);\n        };\n        const value = typeof props.value === 'undefined' ? props.defaultValue : props.value;\n        this.state = {\n            value,\n        };\n    }\n    static getDerivedStateFromProps(nextProps) {\n        if ('value' in nextProps) {\n            return {\n                value: nextProps.value,\n            };\n        }\n        return null;\n    }\n    componentDidMount() {\n        this.clearPasswordValueAttribute();\n    }\n    // Since polyfill `getSnapshotBeforeUpdate` need work with `componentDidUpdate`.\n    // We keep an empty function here.\n    componentDidUpdate() { }\n    getSnapshotBeforeUpdate(prevProps) {\n        if (hasPrefixSuffix(prevProps) !== hasPrefixSuffix(this.props)) {\n            warning(this.input !== document.activeElement, 'Input', `When Input is focused, dynamic add or remove prefix / suffix will make it lose focus caused by dom structure change. Read more: https://ant.design/components/input/#FAQ`);\n        }\n        return null;\n    }\n    componentWillUnmount() {\n        if (this.removePasswordTimeout) {\n            clearTimeout(this.removePasswordTimeout);\n        }\n    }\n    focus() {\n        this.input.focus();\n    }\n    blur() {\n        this.input.blur();\n    }\n    select() {\n        this.input.select();\n    }\n    setValue(value, callback) {\n        if (!('value' in this.props)) {\n            this.setState({ value }, callback);\n        }\n    }\n    render() {\n        return <ConfigConsumer>{this.renderComponent}</ConfigConsumer>;\n    }\n}\nInput.defaultProps = {\n    type: 'text',\n};\nInput.propTypes = {\n    type: PropTypes.string,\n    id: PropTypes.string,\n    size: PropTypes.oneOf(InputSizes),\n    maxLength: PropTypes.number,\n    disabled: PropTypes.bool,\n    value: PropTypes.any,\n    defaultValue: PropTypes.any,\n    className: PropTypes.string,\n    addonBefore: PropTypes.node,\n    addonAfter: PropTypes.node,\n    prefixCls: PropTypes.string,\n    onPressEnter: PropTypes.func,\n    onKeyDown: PropTypes.func,\n    onKeyUp: PropTypes.func,\n    onFocus: PropTypes.func,\n    onBlur: PropTypes.func,\n    prefix: PropTypes.node,\n    suffix: PropTypes.node,\n    allowClear: PropTypes.bool,\n};\npolyfill(Input);\nexport default Input;\n"],"file":"Input.js"}